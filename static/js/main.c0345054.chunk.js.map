{"version":3,"sources":["hooks/useInterval.js","hooks/useWindowSize.js","util.js","hooks/useBoard.js","components/Brushes.js","components/Controls.js","App.js","serviceWorker.js","index.js"],"names":["useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","useWindowSize","isClient","window","getSize","useCallback","width","innerWidth","undefined","height","innerHeight","useState","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","indexToCoord","index","cols","x","y","Math","floor","coordToIndex","calcNeighborCoordinate","yd","yTotal","m","handleBoardDimensionChange","board","cCols","cRows","nCols","nRows","colDiff","rowDiff","nBoard","colsToAdd","i","newColsAdded","currentPosition","splice","Array","fill","addCols","colsToRemove","abs","removeCols","rowsToAdd","addRows","slice","removeRows","getBoardWithAppliedBrushAndPaintedIndices","bCols","bRows","brush","brushDistanceVec","distanceVec","paintedIndices","Set","l","length","template","xd","boardIndex","add","countNeighbors","COLS","ROWS","neighborCount","xCoord2D","yCoord2D","useBoard","rows","seed","setBoard","isRunning","setIsRunning","newBoard","boardLength","coord","every","cell","isDesolate","brushDistanceVecFromCenter","centerCoord","bcx","bcy","distanceVecsFromCenter","brushSize","cbpx","cbpy","rotateBrush90deg","newTemplate","rotatedTemplate","rotateTemplate90deg","brushes","name","displayName","getBrush","b","filter","BrushSelector","onChange","selectedBrush","className","value","map","key","Controls","advanceBoard","toggleIsRunning","setSelectedBrushWrapper","touchHoverClear","setLastPaintedIndices","memoBoardReset","event","code","type","document","memoNext","onTouchStart","onClick","e","target","blur","lastHoverCoord","mousePosToCoord","eX","eY","intersection","setA","setB","_intersection","elem","has","CanvasBoard","setCols","setRows","setHoverBoard","hoverBoard","lastPaintedHoverIndices","lastPaintedIndices","setLastPaintedHoverIndices","canvasRef","drawCell","ctx","fillStyle","fillRect","drawHoverCell","newRows","newCols","getContext","clearRect","clearCanvas","ref","size","cCoord","pageX","pageY","onMouseLeave","onTouchEnd","changedTouches","clientX","clientY","preventDefault","onTouchMove","touches","onMouseMove","buttons","BoardWrapper","defaultBrush","setSelectedBrush","newBrush","keyCode","memoRotateBrush","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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AAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAChE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE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","file":"static/js/main.c0345054.chunk.js","sourcesContent":["import {useEffect, useRef} from \"react\";\n\n\nfunction useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    // Remember the latest callback.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n            savedCallback.current();\n        }\n\n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n    }, [delay]);\n}\n\nexport default useInterval;\n","import {useState, useEffect, useCallback} from 'react';\n\n// Hook\nfunction useWindowSize() {\n    const isClient = typeof window === 'object';\n\n    const getSize = useCallback(function () {\n        return {\n            width: isClient ? window.innerWidth : undefined,\n            height: isClient ? window.innerHeight : undefined\n        };\n    }, [isClient])\n\n    const [windowSize, setWindowSize] = useState(getSize);\n\n    useEffect(() => {\n        if (!isClient) {\n            return false;\n        }\n\n        function handleResize() {\n            setWindowSize(getSize());\n        }\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, [getSize, isClient]); // Empty array ensures that effect is only run on mount and unmount\n\n    return windowSize;\n}\n\nexport default useWindowSize;\n","export const indexToCoord = (index, cols) => {\n    return {\n        x: index % cols,\n        y: Math.floor(index / cols)\n    }\n};\n\nexport const coordToIndex = ({x, y}, cols) => {\n    return y * cols + x;\n};\n\nexport const isDesolate = (board) => {\n    return board.every((cell) => cell === 0)\n};\n\nexport const mod = (x, m) => {\n    return (x % m + m) % m;\n};\n\n// calculate x or y coordinate of a neighbor given a diff and that dimension's size\n// This will wrap around the axis\nexport const calcNeighborCoordinate = (y, yd, yTotal) => {\n    return mod(y + yd, yTotal);\n};\n","import {useState} from \"react\";\nimport {calcNeighborCoordinate, coordToIndex, indexToCoord, isDesolate} from \"../util\"\n\nexport const addCols = (board, cCols, cRows, nCols) => {\n    const colsToAdd = nCols - cCols;\n\n    for (let i = 1; i <= cRows; i++) {\n        const newColsAdded = (i - 1) * colsToAdd;\n        const currentPosition = i * cCols;\n\n        board.splice(newColsAdded + currentPosition, 0, ...Array(colsToAdd).fill(0))\n    }\n\n    return board;\n};\n\nexport const removeCols = (board, cCols, cRows, nCols) => {\n    const colsToRemove = Math.abs(nCols - cCols);\n\n    for (let i = 1; i <= cRows; i++) {\n        const currentPosition = i * nCols;\n\n        board.splice(currentPosition, colsToRemove)\n    }\n\n    return board;\n};\n\nexport const addRows = (board, cCols, cRows, nRows) => {\n    const rowsToAdd = nRows - cRows;\n    return [...board, ...Array(rowsToAdd * cCols).fill(0)]\n};\n\nexport const removeRows = (board, cCols, cRows, nRows) => {\n    return board.slice(0, cCols * nRows)\n};\n\nexport const handleBoardDimensionChange = (board, cCols, cRows, nCols, nRows) => {\n    const colDiff = nCols - cCols;\n    const rowDiff = nRows - cRows;\n\n    let nBoard = [...board];\n\n    if (colDiff > 0) {\n        nBoard = addCols(board, cCols, cRows, nCols);\n    } else if (colDiff < 0) {\n        nBoard = removeCols(board, cCols, cRows, nCols);\n    }\n\n    if (rowDiff > 0) {\n        nBoard = addRows(nBoard, nCols, cRows, nRows);\n    } else if (rowDiff < 0) {\n        nBoard = removeRows(nBoard, nCols, cRows, nRows);\n    }\n\n    return nBoard;\n};\n\nexport const applyBrush = ({x, y}, board, bCols, bRows, brush) => {\n    // cache the distance vector\n    const brushDistanceVec = brush.distanceVec;\n    let nBoard = [...board];\n\n    for (let i = 0, l = brushDistanceVec.length; i < l; i++) {\n        // Only apply the alive cells to the board. This will let put\n        // irregular brushes closer together (like the glider)\n        if (brush.template[i] === 1) {\n            const [xd, yd] = brushDistanceVec[i];\n\n            const boardIndex = coordToIndex({\n                x: calcNeighborCoordinate(x, xd, bCols),\n                y: calcNeighborCoordinate(y, yd, bRows)\n            }, bCols);\n            nBoard[boardIndex] = brush.template[i];\n        }\n    }\n\n    return nBoard;\n};\n\nexport const getBoardWithAppliedBrushAndPaintedIndices = ({x, y}, board, bCols, bRows, brush) => {\n\n    const brushDistanceVec = brush.distanceVec;\n    let nBoard = [...board];\n    let paintedIndices = new Set();\n\n    for (let i = 0, l = brushDistanceVec.length; i < l; i++) {\n        // Only apply the alive cells to the board. This will let put\n        // irregular brushes closer together (like the glider)\n        if (brush.template[i] === 1) {\n            const [xd, yd] = brushDistanceVec[i];\n\n            const boardIndex = coordToIndex({\n                x: calcNeighborCoordinate(x, xd, bCols),\n                y: calcNeighborCoordinate(y, yd, bRows)\n            }, bCols);\n            nBoard[boardIndex] = brush.template[i];\n\n            paintedIndices.add(boardIndex);\n        }\n    }\n\n    return {\n        nBoard, paintedIndices\n    };\n};\n\n\nconst countNeighbors = ({x, y}, board, COLS, ROWS) => {\n    // hard coded for perf reasons\n    const neighborDiff = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];\n\n    let neighborCount = 0;\n\n    for (let [xd, yd] of neighborDiff) {\n        const xCoord2D = calcNeighborCoordinate(x, xd, COLS);\n        const yCoord2D = calcNeighborCoordinate(y, yd, ROWS);\n\n        if (board[coordToIndex({x: xCoord2D, y: yCoord2D}, COLS)] === 1) {\n            neighborCount += 1;\n        }\n    }\n    return neighborCount;\n};\n\nexport default function useBoard(rows, cols, seed) {\n    const [board, setBoard] = useState(seed);\n    const [isRunning, setIsRunning] = useState(false);\n\n    const advanceBoard = () => {\n        let newBoard = [...board];\n\n        for (let i = 0, boardLength = board.length; i < boardLength; i++) {\n            const coord = indexToCoord(i, cols);\n            const neighborCount = countNeighbors(coord, board, cols, rows);\n\n            if (board[i] === 1) {\n                if (neighborCount < 2 || neighborCount > 3) {\n                    newBoard[i] = 0;\n                }\n            } else {\n                if (neighborCount === 3) {\n                    newBoard[i] = 1;\n                }\n            }\n        }\n\n        setBoard(newBoard);\n\n        if (isDesolate(newBoard)) {\n            setIsRunning(false);\n        }\n    };\n\n    return [board, setBoard, isRunning, setIsRunning, advanceBoard]\n}\n","import React from \"react\";\nimport {coordToIndex, indexToCoord} from \"../util\";\n\n\nexport const centerCoord = ({rows, cols}) => {\n    return {\n        x: Math.floor((cols - 1) / 2),\n        y: Math.floor((rows - 1) / 2)\n    }\n};\n\nexport const brushDistanceVecFromCenter = ({rows, cols, template}) => {\n    const {x: bcx, y: bcy} = centerCoord({rows, cols});\n    let distanceVecsFromCenter = Array(rows * cols);\n\n    for (let i = 0, brushSize = template.length; i < brushSize; i++) {\n        let {x: cbpx, y: cbpy} = indexToCoord(i, cols);\n\n        distanceVecsFromCenter[i] = [cbpx - bcx, cbpy - bcy]\n    }\n\n    return distanceVecsFromCenter;\n};\n\nexport const rotateTemplate90deg = ({template, rows, cols}) => {\n    let rotatedTemplate = Array(rows * cols);\n    let i = 0;\n\n    for (let x = cols - 1; x >= 0; x--) {\n        for (let y = 0; y < rows; y++) {\n            const index = coordToIndex({x, y}, cols);\n            rotatedTemplate[i] = template[index];\n            i++\n        }\n    }\n\n    return {\n        template: rotatedTemplate,\n        rows: cols,\n        cols: rows\n    }\n};\n\nexport const rotateBrush90deg = (brush) => {\n    const newTemplate = rotateTemplate90deg(brush);\n    return {\n        ...brush,\n        ...newTemplate,\n        distanceVec: brushDistanceVecFromCenter(newTemplate)\n    }\n};\n\nexport const brushes = [\n    {\n        name: \"pixel\",\n        displayName: \"Pixel\",\n        rows: 1,\n        cols: 1,\n        template: [1]\n    },\n    {\n        name: \"glider\",\n        displayName: \"Glider\",\n        rows: 3,\n        cols: 3,\n        template: [\n            0, 1, 0,\n            0, 0, 1,\n            1, 1, 1\n        ]\n    },\n    {\n        name: \"diehard\",\n        displayName: \"Die Hard\",\n        rows: 2,\n        cols: 8,\n        template: [\n            1, 1, 0, 0, 0, 0, 1, 0,\n            0, 1, 0, 0, 0, 1, 1, 1,\n        ]\n    },\n    {\n        name: \"rpentomino\",\n        displayName: \"R-Pentomino\",\n        rows: 3,\n        cols: 3,\n        template: [\n            0, 1, 1,\n            1, 1, 0,\n            0, 1, 0\n        ]\n    },\n    {\n        name: \"mwss\",\n        displayName: \"Middle weight space ship\",\n        rows: 5,\n        cols: 6,\n        template: [\n            0, 0, 0, 1, 0, 0,\n            0, 1, 0, 0, 0, 1,\n            1, 0, 0, 0, 0, 0,\n            1, 0, 0, 0, 0, 1,\n            1, 1, 1, 1, 1, 0,\n        ]\n    },\n    {\n        name: \"hwss\",\n        displayName: \"Heavy weight space ship\",\n        rows: 5,\n        cols: 7,\n        template: [\n            0, 0, 0, 1, 1, 0, 0,\n            0, 1, 0, 0, 0, 0, 1,\n            1, 0, 0, 0, 0, 0, 0,\n            1, 0, 0, 0, 0, 0, 1,\n            1, 1, 1, 1, 1, 1, 0,\n        ]\n    },\n    {\n        name: \"gospergun\",\n        displayName: \"Gosper glider gun\",\n        rows: 9,\n        cols: 36,\n        template: [\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,\n            1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        ]\n    },\n    {\n        name: \"greatonoff\",\n        displayName: \"Great on-off\",\n        rows: 8,\n        cols: 8,\n        template: [\n            0, 0, 1, 1, 0, 0, 0, 0,\n            0, 1, 0, 0, 1, 0, 0, 0,\n            0, 1, 0, 1, 0, 0, 0, 0,\n            1, 1, 0, 1, 0, 0, 1, 0,\n            0, 0, 0, 0, 1, 1, 0, 1,\n            0, 0, 0, 0, 0, 0, 0, 1,\n            0, 0, 0, 0, 1, 1, 1, 0,\n            0, 0, 0, 0, 1, 0, 0, 0,\n        ]\n    },\n    {\n        name: \"pufferfish\",\n        displayName: \"Puffer fish\",\n        rows: 12,\n        cols: 15,\n        template: [\n            0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,\n            0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,\n            0,1,1,0,0,1,0,0,0,1,0,0,1,1,0,\n            0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,\n            0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,\n            1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,\n            1,1,0,0,0,0,1,0,1,0,0,0,0,1,1,\n            0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,\n            0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,\n            0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,\n        ]\n    },\n    {\n        name: \"puffsuppressor\",\n        displayName: \"Puff suppressor\",\n        rows: 25,\n        cols: 33,\n        template: [\n            0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,0,1,0,\n            0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,0,1,0,\n            0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,\n            0,0,0,1,0,1,0,0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,1,0,1,1,0,0,0,0,1,0,0,\n            0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,\n            0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,1,1,1,0,0,0,1,0,0,1,\n            1,1,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,\n            0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,1,0,1,0,0,1,\n            0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,\n            0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,1,0,1,0,0,1,\n            1,1,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,\n            0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,1,1,1,0,0,0,1,0,0,1,\n            0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,\n            0,0,0,1,0,1,0,0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,1,0,1,1,0,0,0,0,1,0,0,\n            0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,\n            0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,0,1,0,\n            0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,0,1,0,\n            0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n        ]\n    },\n    {\n        name: \"nms\",\n        displayName: \"Non monotonic spaceship\",\n        rows: 11,\n        cols: 21,\n        template: [\n            0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,\n            0,0,0,0,0,0,1,1,1,0,1,0,1,1,1,0,0,0,0,0,0,\n            0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,\n            1,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,1,1,1,\n            0,0,1,0,1,1,0,0,1,0,0,0,0,1,1,1,0,1,0,0,0,\n            0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,\n            0,0,1,0,1,1,0,0,1,0,0,0,0,1,1,1,0,1,0,0,0,\n            1,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,1,1,1,\n            0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,\n            0,0,0,0,0,0,1,1,1,0,1,0,1,1,1,0,0,0,0,0,0,\n            0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,\n        ]\n    },\n];\n\n\nexport const getBrush = (name) => {\n    let b = brushes.filter(brush => brush.name === name)[0];\n    b.distanceVec = brushDistanceVecFromCenter(b);\n    return b;\n};\n\nexport function BrushSelector({onChange, selectedBrush}) {\n    return (\n        <select\n            className=\"select\"\n            value={selectedBrush.name} onChange={onChange}>\n            {brushes.map(brush => {\n                return (\n                    <option key={brush.name} value={brush.name}>\n                        {brush.displayName}\n                    </option>\n                )\n            })}\n        </select>\n    )\n}\n","import React, {useCallback, useEffect} from \"react\";\nimport {BrushSelector, getBrush, rotateBrush90deg} from \"./Brushes\";\n\nexport default function Controls({advanceBoard, toggleIsRunning, isRunning, setIsRunning, setBoard, board, setSelectedBrushWrapper, selectedBrush, touchHoverClear, setLastPaintedIndices}) {\n\n    const memoBoardReset = useCallback((event) => {\n        if (event.code === \"KeyE\" || event.type === \"click\") {\n            setIsRunning(false);\n            setBoard([...board].fill(0))\n            setLastPaintedIndices(new Set())\n        }\n    }, [setIsRunning, setBoard, board, setLastPaintedIndices]);\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", memoBoardReset, false);\n        return () => {\n            document.removeEventListener(\"keydown\", memoBoardReset, false)\n        };\n    }, [memoBoardReset]);\n\n\n    const memoNext = useCallback((event) => {\n        if (event.code === \"KeyW\" || event.type === \"click\") {\n            setIsRunning(false);\n            advanceBoard();\n        }\n    }, [setIsRunning, advanceBoard]);\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", memoNext, false);\n        return () => {\n            document.removeEventListener(\"keydown\", memoNext, false)\n        };\n    }, [memoNext]);\n\n    return (\n        <div className=\"controls\">\n            <button\n                className=\"button\"\n                onTouchStart={touchHoverClear}\n                onClick={() => {\n                    setIsRunning(false);\n                    advanceBoard()\n                }}>\n                Next <span className=\"button__shortcut\">[<span className=\"shift\">⇧</span>+w]</span>\n            </button>\n            <button\n                className=\"button\"\n                onTouchStart={touchHoverClear}\n                onClick={toggleIsRunning}>\n                {isRunning ? \"Stop \" : \"Start \"}\n                <span className=\"button__shortcut\">[space]</span>\n            </button>\n            <button\n                className=\"button\"\n                onTouchStart={touchHoverClear}\n                onClick={memoBoardReset}>\n                Reset\n                <span className=\"button__shortcut\">[<span className=\"shift\">⇧</span>+e]</span>\n            </button>\n            <button\n                className=\"button button--mobile\"\n                onClick={() => {\n                    setSelectedBrushWrapper(rotateBrush90deg(selectedBrush))\n                }}>\n                Rotate 90deg\n                <span className=\"button__shortcut\">[<span className=\"shift\">⇧</span>+r]</span>\n            </button>\n            <BrushSelector onChange={e => {\n                setSelectedBrushWrapper(getBrush((e.target.value)))\n                e.target.blur()\n            }}\n                           selectedBrush={selectedBrush}/>\n            <button\n                className=\"button button--desktop\"\n                onClick={() => {\n                    setSelectedBrushWrapper(rotateBrush90deg(selectedBrush))\n                }}>\n                Rotate 90deg\n                <span className=\"button__shortcut\">[<span className=\"shift\">⇧</span>+r]</span>\n            </button>\n        </div>\n    );\n}\n","import React, {useRef, Fragment, useEffect, useState, useCallback} from 'react';\nimport useInterval from \"./hooks/useInterval\";\nimport './App.scss';\nimport useWindowSize from \"./hooks/useWindowSize\";\nimport useBoard, {\n    applyBrush,\n    getBoardWithAppliedBrushAndPaintedIndices,\n    handleBoardDimensionChange\n} from \"./hooks/useBoard\";\nimport {indexToCoord, coordToIndex} from \"./util\"\nimport {brushDistanceVecFromCenter, getBrush, rotateBrush90deg} from \"./components/Brushes\";\nimport Controls from \"./components/Controls\";\n\nconst INTERVAL = 50;\nconst CELLSIZE = 15;\nconst gridGap = 1;\nlet lastHoverCoord;\n\nconst mousePosToCoord = (eX, eY) => {\n    const x = Math.floor(eX / (CELLSIZE + gridGap));\n    const y = Math.floor(eY / (CELLSIZE + gridGap));\n    return {x, y};\n};\n\nconst intersection = (setA, setB) => {\n    let _intersection = new Set()\n    for (let elem of setB) {\n        if (setA.has(elem)) {\n            _intersection.add(elem)\n        }\n    }\n    return _intersection\n};\n\nfunction CanvasBoard({board, windowSize, cols, rows, setBoard, setCols, setRows, brush, setHoverBoard, hoverBoard, seed, lastPaintedHoverIndices, lastPaintedIndices, setLastPaintedHoverIndices, setLastPaintedIndices, isRunning}) {\n    const canvasRef = useRef(null);\n\n    const clearCanvas = (ctx) => {\n        ctx.clearRect(0, 0, windowSize.width, windowSize.height);\n    };\n\n    const drawCell = (ctx, cell, index, cols) => {\n        const {x, y} = indexToCoord(index, cols);\n        ctx.fillStyle = cell === 1 ? \"#00adb5\" : \"#393e46\";\n        ctx.fillRect(x * CELLSIZE + x, y * CELLSIZE + y, CELLSIZE, CELLSIZE)\n    };\n\n    const drawHoverCell = (ctx, cell, index, cols) => {\n        // draws only the alive cell in the template\n        // paints the cell only if it has beeb set to be hovered\n        if (cell === 1 && (isRunning || lastPaintedHoverIndices.has(index))) {\n            const {x, y} = indexToCoord(index, cols);\n            ctx.fillStyle = lastPaintedIndices.has(index) ? \"rgb(200,87,125)\" : \"rgba(238, 238, 238, 0.3)\";\n            ctx.fillRect(x * CELLSIZE + x, y * CELLSIZE + y, CELLSIZE, CELLSIZE)\n        }\n    };\n\n    useEffect(() => {\n        const newRows = Math.floor((windowSize.height + gridGap) / (CELLSIZE + gridGap));\n        const newCols = Math.floor((windowSize.width + gridGap) / (CELLSIZE + gridGap));\n        if (cols !== newCols || rows !== newRows) {\n            setBoard(handleBoardDimensionChange(board, cols, rows, newCols, newRows));\n            setRows(newRows);\n            setCols(newCols);\n        }\n    });\n\n    useEffect(() => {\n        const ctx = canvasRef.current.getContext(\"2d\");\n        clearCanvas(ctx);\n        for (let i = 0, boardLength = board.length; i < boardLength; i++) {\n            drawCell(ctx, board[i], i, cols);\n            drawHoverCell(ctx, hoverBoard[i], i, cols)\n        }\n    });\n\n    return (\n        <canvas\n            ref={canvasRef}\n            width={windowSize.width}\n            height={windowSize.height}\n            onClick={e => {\n                if (isRunning || intersection(lastPaintedHoverIndices, lastPaintedIndices).size === 0) {\n                    const cCoord = mousePosToCoord(e.pageX, e.pageY);\n                    const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(cCoord, board, cols, rows, brush)\n\n                    if (isRunning) {\n                        setLastPaintedIndices(new Set());\n                    } else {\n                        setLastPaintedIndices(paintedIndices);\n                    }\n                    setBoard(nBoard)\n                }\n            }}\n            onMouseLeave={() => setHoverBoard(seed)}\n            onTouchEnd={e => {\n                lastHoverCoord = mousePosToCoord(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n                if (isRunning || intersection(lastPaintedHoverIndices, lastPaintedIndices).size === 0) {\n                    const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(lastHoverCoord, board, cols, rows, brush)\n                    if (isRunning) {\n                        setLastPaintedIndices(new Set());\n                    } else {\n                        setLastPaintedIndices(paintedIndices);\n                    }\n                    setBoard(nBoard)\n                }\n                setHoverBoard(seed);\n                e.preventDefault()\n            }}\n            onTouchMove={(e) => {\n                lastHoverCoord = mousePosToCoord(e.touches[0].clientX, e.touches[0].clientY);\n                const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(lastHoverCoord, seed, cols, rows, brush);\n                setLastPaintedHoverIndices(paintedIndices);\n                if (isRunning) {\n                    setLastPaintedHoverIndices(new Set());\n                } else {\n                    setLastPaintedHoverIndices(paintedIndices);\n                }\n                setHoverBoard(nBoard);\n                // allow dragging and placing smaller brushes like gliders and pixels\n                if ((brush.template.length < 17 &&\n                    (isRunning || intersection(lastPaintedHoverIndices, lastPaintedIndices).size === 0))) {\n                    const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(lastHoverCoord, board, cols, rows, brush)\n                    if (isRunning) {\n                        setLastPaintedIndices(new Set());\n                    } else {\n                        setLastPaintedIndices(paintedIndices);\n                    }\n                    setBoard(nBoard)\n                }\n            }}\n            onMouseMove={(e) => {\n                lastHoverCoord = mousePosToCoord(e.pageX, e.pageY);\n\n                const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(lastHoverCoord, seed, cols, rows, brush);\n\n                if (isRunning) {\n                    setLastPaintedHoverIndices(new Set());\n                } else {\n                    setLastPaintedHoverIndices(paintedIndices);\n                }\n                setHoverBoard(nBoard);\n\n                if (e.buttons === 1 || e.buttons === 3) {\n                    if (isRunning ||\n                        intersection(lastPaintedHoverIndices, lastPaintedIndices).size === 0) {\n                        const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(lastHoverCoord, board, cols, rows, brush);\n                        if (isRunning) {\n                            setLastPaintedIndices(new Set());\n                        } else {\n                            setLastPaintedIndices(paintedIndices);\n                        }\n                        setBoard(nBoard)\n                    }\n                }\n            }}\n        />\n    );\n}\n\nfunction BoardWrapper({cols, rows, seed, windowSize, setRows, setCols, defaultBrush}) {\n    const [hoverBoard, setHoverBoard] = useBoard(rows, cols, seed);\n    const [board, setBoard, isRunning, setIsRunning, advanceBoard] = useBoard(rows, cols, seed);\n    const [selectedBrush, setSelectedBrush] = useState(defaultBrush);\n    const [lastPaintedIndices, setLastPaintedIndices] = useState(new Set());\n    const [lastPaintedHoverIndices, setLastPaintedHoverIndices] = useState(new Set());\n\n    useInterval(advanceBoard, isRunning ? INTERVAL : null);\n\n    const setSelectedBrushWrapper = useCallback((newBrush) => {\n        //Caches the distance vector, otherwise it is calculated on every render\n        newBrush.distanceVec = brushDistanceVecFromCenter(newBrush);\n        setSelectedBrush(newBrush);\n    }, [setSelectedBrush]);\n\n    const toggleIsRunning = useCallback((event) => {\n        if (event.keyCode === 32 || event.type === \"click\") {\n            setIsRunning(!isRunning);\n        }\n    }, [isRunning, setIsRunning]);\n\n    const touchHoverClear = useCallback(() => {\n        setHoverBoard(seed);\n    }, [setHoverBoard, seed]);\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", toggleIsRunning, false);\n        return () => {\n            document.removeEventListener(\"keydown\", toggleIsRunning, false)\n        };\n    }, [toggleIsRunning]);\n\n    const memoRotateBrush = useCallback((event) => {\n        if (event.code === \"KeyR\") {\n            setSelectedBrushWrapper(rotateBrush90deg(selectedBrush));\n            const {nBoard, paintedIndices} = getBoardWithAppliedBrushAndPaintedIndices(lastHoverCoord, seed, cols, rows, rotateBrush90deg(selectedBrush));\n            setLastPaintedHoverIndices(paintedIndices);\n            setHoverBoard(nBoard);\n        }\n    }, [setSelectedBrushWrapper, selectedBrush, seed, cols, rows, setHoverBoard]);\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", memoRotateBrush, false);\n        return () => {\n            document.removeEventListener(\"keydown\", memoRotateBrush, false)\n        };\n    }, [memoRotateBrush]);\n\n    return (\n        <Fragment>\n            <CanvasBoard board={board}\n                         brush={selectedBrush}\n                         setBoard={setBoard}\n                         windowSize={windowSize}\n                         cols={cols}\n                         setCols={setCols}\n                         setRows={setRows}\n                         rows={rows}\n                         seed={seed}\n                         setHoverBoard={setHoverBoard}\n                         hoverBoard={hoverBoard}\n                         lastPaintedIndices={lastPaintedIndices}\n                         setLastPaintedIndices={setLastPaintedIndices}\n                         lastPaintedHoverIndices={lastPaintedHoverIndices}\n                         isRunning={isRunning}\n                         setLastPaintedHoverIndices={setLastPaintedHoverIndices}\n            />\n            <Controls advanceBoard={advanceBoard}\n                      toggleIsRunning={toggleIsRunning}\n                      isRunning={isRunning}\n                      setIsRunning={setIsRunning}\n                      setBoard={setBoard}\n                      board={board}\n                      touchHoverClear={touchHoverClear}\n                      setSelectedBrushWrapper={setSelectedBrushWrapper}\n                      selectedBrush={selectedBrush}\n                      setLastPaintedIndices={setLastPaintedIndices}/>\n        </Fragment>\n    )\n}\n\nfunction App() {\n    const windowSize = useWindowSize();\n    const defaultBrush = getBrush(\"glider\");\n    // defaultBrush.distanceVec = brushDistanceVecFromCenter(defaultBrush);\n    const [rows, setRows] = useState(Math.floor((windowSize.height + gridGap) / (CELLSIZE + gridGap)));\n    const [cols, setCols] = useState(Math.floor((windowSize.width + gridGap) / (CELLSIZE + gridGap)));\n    const seed = Array(rows * cols).fill(0);\n\n    return (\n        <BoardWrapper rows={rows} cols={cols} seed={seed} windowSize={windowSize} setRows={setRows} setCols={setCols}\n                      defaultBrush={defaultBrush}/>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}